
{% extends '_base.html' %}
{% load static %}
{% block content %}
{% if user.is_authenticated%}
  <p class="text-end">Logged in as {{ user.username }}</p>
{% else %}
 <p class="text-end">You are not logged in</p>
{%endif%}
<div class="container">
  <br/>
  <h1>Group simularity</h1>
  <table class="table table-striped table-hover" style="table-layout: fixed; word-wrap: break-word;">
    <thead>
      <tr>
        <th scope="col">Group:</th>
        <th scope="col">Simularity:</th>
        </tr>
    </thead>
      <tbody>
      {% for data in group_data %}
      <tr>
        <td>{{data.0}}</td>
        <td>%{{data.1}}</td>
      </tr>
      {% endfor %}
      </tbody>
  </table>
  <script>
  $(document).ready(function() {
    setInterval(function(){

      $.ajax({
        type:'GET',
	url:"{% url 'Audit:get_simularity' %}",
	success: function(response) {
	 
	 $("tbody").empty();
	 for (var key in response.group_data) {
	  var data = "<tr><td>"+key+"</td><td>%"+response.group_data[key]+"</td></tr>";
	  $("tbody").append(data);
	 }
	},
	error: function(response) {
	  alert('error fetching data');
	}
        });
      },3000);
 });
  </script>
  {% endblock content %}
</div>
